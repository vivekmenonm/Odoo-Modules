<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<!-- Timesheets -->
	<record id="view_project_timesheet_form" model="ir.ui.view">
		<field name="name">project.timesheet.form</field>
		<field name="model">account.analytic.line</field>
		<field name="arch" type="xml">
			<form string="Timesheets">
				<header>
					<button name="action_set_submit" type="object" string="Submit" class="oe_highlight oe_read_only" states="draft" />
					<button name="action_set_cancel" type="object" string="Cancel" states="submit" groups="hr_timesheet.group_timesheet_manager" />
					<button name="action_set_draft" type="object" string="Reset to Draft" states="cancel" groups="hr_timesheet.group_timesheet_manager" />
					<field name="state" widget="statusbar" />
				</header>
				<sheet>
					<group>
						<group>
							<field name="date" attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="project_id" required="1" widget="selection" attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="task_id" required="1" widget="selection" attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="user_id" invisible="1" />
							<field name="employee_id" widget="selection" attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="name" attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="records" attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="unit_amount" string="Duration" widget="float_time" />
							<label for="productivity_grade" />
							<div>
								<field name="productivity_grade" readonly="1" style="display: block;" />
								<field name="grade_label" readonly="1" style="display: block;" />
							</div>
							<field name="company_id" invisible="1" />
							<!-- <field name="message_partner_ids" widget="many2many_tags" /> -->
							<!-- <field name="message_channel_ids" widget="many2many_tags" /> -->
						</group>
					</group>
				</sheet>
				<!-- <div class="oe_chatter"> -->
				<!-- <field name="message_follower_ids" widget="mail_followers" -->
				<!-- help="Follow this project to automatically track the events associated to tasks and issues of this project." -->
				<!-- groups="base.group_user" /> -->
				<!-- </div> -->
			</form>
		</field>
	</record>

	<record id="view_project_timesheet_form_tree" model="ir.ui.view">
		<field name="name">project.timesheet.tree</field>
		<field name="model">account.analytic.line</field>
		<field name="arch" type="xml">
			<tree string="Timesheets">
				<field name="date" />
				<field name="project_id" />
				<field name="task_id" />
				<field name="user_id" invisible="1" />
				<field name="employee_id" />
				<field name="records" />
				<field name="name" />
				<field name="unit_amount" string="Duration" widget="float_time" />
				<field name="productivity_grade" readonly="1" />
				<field name="grade_label" nolabel="1" />
				<field name="state" />
			</tree>
		</field>
	</record>

	<record id="action_view_project_timesheet_form" model="ir.actions.act_window">
		<field name="name">Timesheets</field>
		<field name="res_model">account.analytic.line</field>
		<field name="domain">[('project_id', '!=', False), ('task_id', '!=', False)]</field>
		<field name="view_mode">tree,form</field>
		<field name="help" type="html">
			<p class="o_view_nocontent_smiling_face">
				Add your Timesheet
			</p>
		</field>
	</record>

	<record id="open_view_project_timesheet_tree" model="ir.actions.act_window.view">
		<field name="sequence" eval="1" />
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_project_timesheet_form_tree" />
		<field name="act_window_id" ref="action_view_project_timesheet_form" />
	</record>

	<record id="open_view_project_timesheet_form" model="ir.actions.act_window.view">
		<field name="sequence" eval="2" />
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_project_timesheet_form" />
		<field name="act_window_id" ref="action_view_project_timesheet_form" />
	</record>

	<menuitem id="menu_project_timesheet" parent="menu_main_productivity"
		action="action_view_project_timesheet_form" sequence="3" />

</odoo>
